/BATCH  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       10:29:47
/input,menust,tmp,''
/GRA,POWER
/GST,ON
/PLO,INFO,3
/GRO,CURL,ON
/CPLANE,1   
/REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
/PREP7  
!*  
ET,1,PLANE182   
!*  
KEYOPT,1,1,2
KEYOPT,1,3,3
KEYOPT,1,6,0
!*  
!*  
R,1,0.2,
!*  
!*  
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,6E7
MPDATA,PRXY,1,,0.2  
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDE,EX,1   
MPDE,PRXY,1 
MPDATA,EX,1,,6E+07  
MPDATA,PRXY,1,,0.2  
BLC4,0,0,8,8
BLC4,3,3,1.5,1.5
BLC4,5,5,1.5,1.5
BLC4,0,1,1,2
BLC4,6,0,1,2
FLST,3,4,5,ORDE,3   
FITEM,3,1   
FITEM,3,-3  
FITEM,3,5   
ASBA,       1,P51X  
MSHAPE,0,2D 
MSHKEY,0
!*  
FLST,5,2,5,ORDE,2   
FITEM,5,4   
FITEM,5,6   
CM,_Y,AREA  
ASEL, , , ,P51X 
CM,_Y1,AREA 
CHKMSH,'AREA'   
CMSEL,S,_Y  
!*  
AMESH,_Y1   
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  
!*  
FLST,5,1,5,ORDE,1   
FITEM,5,6   
CM,_Y,AREA  
ASEL, , , ,P51X 
CM,_Y1,AREA 
CMSEL,S,_Y  
CMDELE,_Y   
!*  
!*  
AREFINE,_Y1, , ,2,0,1,1 
CMDELE,_Y1  
!*  
FLST,2,2,4,ORDE,2   
FITEM,2,21  
FITEM,2,-22 
!*  
/GO 
DL,P51X, ,ALL,0 
FLST,2,1,4,ORDE,1   
FITEM,2,3   
/GO 
!*  
SFL,P51X,PRES,250000,   
FINISH  
/SOL
/STATUS,SOLU
SOLVE   
/STATUS,SOLU
SOLVE   
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!############## 
!## T O  D O ## 
!############## 
!   
! - Generalisierung vervollständigen   
!    o Länge und Breite des Grids zur Fensterabzählung ergänzen  
!   
!   
!   
! - Auswertungspunkte Verbessern
!   
!   
!   
!############## 
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
*do,j,1,10,1
/com,   
*enddo  
/COM *** 5.2.2 ANSYS APDL ***   
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       10:40:38
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,doorX , 1  
*SET,doorY , 2  
*SET,windW , 1.25   
*SET,windH , 1.25   
*SET,margin , 1 
*SET,windMargin , 0.125 
*SET,doorStep , 6   
*SET,data , 0   
*SET,meshsize , 0.1 
*SET,steps , 5    !(width-2*margin)/doorStep
*SET,maxWStep , 2   
*SET,n , 0  
!*ask,startVal,Anfangswert,0
*SET,startVal , 1   
! S 
*SET,size , 92 !steps * (maxWStep+1)*maxWStep /2
*SET,nParam , 10
*dim, c,, size,nParam, 1 ! Example Matrix   
*SET,enow , 0   
*do, ct, 1, size
*do, ct2, 1, nParam 
*SET,c(ct,ct2) , startVal   
*enddo  
*enddo  
! ---------------------------------------   
! *** loop to restart the calculation ***   
!----------------------------------------   
*do,door,1,steps,doorStep   
*do, w1, 0, maxWStep,1  
*do, w2, w1+1,maxWStep,1
*SET,n , n + 1  
!-----------------  
!Initialize Iter
!-----------------  
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       10:40:39
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
*SET,colW1 , MOD(w1,4)  
*SET,rowW1 , (w1 - colW1)/4 
*SET,colW2 , MOD(w2,4)  
*SET,rowW2 , (w2 - colW2)/4 
!Case where window and door are at one line 
*IF, door,LE,3,THEN 
*IF, w1, GE, 12, THEN   
*SET,colW1 , colW1 + 2  
*ENDIF  
*ENDIF  
*IF, door,LE,3,THEN 
*IF, w2, GE, 12, THEN   
*SET,colW2 , colW2 + 2  
*ENDIF  
*SET,wind1X , margin + colW1*(2* windMargin + windW) + windMargin   
*SET,wind1Y , height - margin - (rowW1+1)*(2*windMargin + windW) + windMargin   
*SET,wind2X , margin + colW2*(2* windMargin + windW) + windMargin   
*SET,wind2Y , height - margin - (rowW2+1)*(2*windMargin + windW) + windMargin   
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , door  
*SET,c(n,2) , wind1X
*SET,c(n,3) , wind1Y
*SET,c(n,4) , wind2X
*SET,c(n,5) , wind2Y
!-----------------  
!Create House   
!-----------------  
BLC4,xStart, yStart, width, height !House   
BLC4,door,yStart, doorX, doorY !Door
BLC4,wind1X,wind1Y,windW,windH !Window  
BLC4,wind2X,wind2Y,windW,windH !2nd Window  
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2   
dl,17,,all  
dl,18,,all  
sfl,3,pres,25000000 
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
FINISH  
/SOL
solve   
/BATCH  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:39:33
/input,menust,tmp,''
/GRA,POWER
/GST,ON
/PLO,INFO,3
/GRO,CURL,ON
/CPLANE,1   
/REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!############## 
!## T O  D O ## 
!############## 
!   
! - Generalisierung vervollständigen   
!    o Länge und Breite des Grids zur Fensterabzählung ergänzen  
!   
!   
!   
! - Auswertungspunkte Verbessern
!   
!   
!   
!############## 
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
*do,j,1,10,1
/com,   
*enddo  
/COM *** 5.2.2 ANSYS APDL ***   
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:55:05
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,margin , 1 
!Door   
*SET,doorW , 1  
*SET,doorH , 2  
!Window 
*SET,windW , 1.25   
*SET,windH , 1.25   
*SET,windMargin , 0.125 
!Helping Variables  
*SET,ww , windW + 2 * windMargin
*SET,wh , windH + 2 * windMargin
!For House  
*SET,rw , width - 2 * margin
*SET,rh , height - margin   
*SET,meshsize , 0.1 
*SET,doorStep , 1   
*SET,windowStep , 0.5   
*SET,n , 0  
*SET,maxDStep , 5    !(rw - doorW)/doorStep 
*SET,maxWindowStepWidth , (rw - ww)//windowStep 
*SET,maxWindowStepHeight , (rh - door - wh)//windowStep 
*SET,maxWStep , maxWindowStepWidth * maxWindowStepHeight !+ maxWindowStepWidth//2   
*SET,nextPos , ww//windowStep + 1   
! Creating Matrix   
*SET,size , 92 !steps * (maxWStep+1)*maxWStep /2
*SET,nParam , 10
*dim, c,, size,nParam, 1
! -------------------------------------------   
!  Loop over door-window-window positions   
!--------------------------------------------   
*do,door,1,maxDStep,doorStep
*do, w1, 0, maxWStep,1  
*do, w2, w1+nextPos,maxWStep,1  
*SET,n , n + 1  
!-----------------  
!Initialize Iter
!-----------------  
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:55:06
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
!-------------------
!New window position
!-------------------
*SET,colW1 , MOD(w1,4)  
*SET,rowW1 , (w1 - colW1)/4 
*SET,colW2 , MOD(w2,4)  
*SET,rowW2 , (w2 - colW2)/4 
!Case where window and door are at one line 
*IF, door,LE,3,THEN 
*IF, w1, GE, 12, THEN   
*SET,colW1 , colW1 + 2  
*ENDIF  
*ENDIF  
*IF, door,LE,3,THEN 
*IF, w2, GE, 12, THEN   
*SET,colW2 , colW2 + 2  
*ENDIF  
*SET,wind1X , margin + colW1*(2* windMargin + windW) + windMargin   
*SET,wind1Y , height - margin - (rowW1+1)*(2*windMargin + windW) + windMargin   
*SET,wind2X , margin + colW2*(2* windMargin + windW) + windMargin   
*SET,wind2Y , height - margin - (rowW2+1)*(2*windMargin + windW) + windMargin   
!-------------------------------------  
!-- Guarantee that its not at (4,4) --  
!-------------------------------------  
! *IF wind1X or wind2X is between 4-windW and 4 
! or wind1Y or wind2Y is between 4-windH and 4  
! continue  
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , door  
*SET,c(n,2) , wind1X
*SET,c(n,3) , wind1Y
*SET,c(n,4) , wind2X
*SET,c(n,5) , wind2Y
!-----------------  
!Create House   
!-----------------  
BLC4,xStart, yStart, width, height !House   
BLC4,door,yStart, doorW, doorH !Door
BLC4,wind1X,wind1Y,windW,windH !Window  
BLC4,wind2X,wind2Y,windW,windH !2nd Window  
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2   
dl,17,,all  
dl,18,,all  
sfl,3,pres,25000000 
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
FINISH  
/SOL
solve   
FINISH  
/POST1  
!-----------------  
! Value at point 4,4
!-----------------  
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!  
! T O   D O !!!!!!!!!!!!!!!!!!!!!!  
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!  
!Checken ob wir wirklich die Lösung bekommen die wir wollen
! maximale Verschiebung bei 4,4 
allsel  
nsel,s,loc,x,4 !select nodes with x coordinate  
nsel,r,loc,y,4 !reselect with y coordinate  
*get,UY44,NODE,NDNEXT(0),U,Y
*get,UX44,NODE,NDNEXT(0),U,X
*get,SX44,NODE,NDNEXT(0),S,X
*get,SY44,NODE,NDNEXT(0),S,Y
*get,SXY44,NODE,NDNEXT(0),S,XY  
*SET,c(n,6) , UX44  
*SET,c(n,7) , UY44  
*SET,c(n,8) , SX44  
*SET,c(n,9) , SY44  
*SET,c(n,10) , SXY44
*enddo  
*enddo  
*enddo  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:55:16
!!! Writes out Matrix to matlab 
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!############## 
!## T O  D O ## 
!############## 
!   
! - Generalisierung vervollständigen   
!    o Länge und Breite des Grids zur Fensterabzählung ergänzen  
!   
!   
!   
! - Auswertungspunkte Verbessern
!   
!   
!   
!############## 
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
*do,j,1,10,1
/com,   
*enddo  
/COM *** 5.2.2 ANSYS APDL ***   
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:57:33
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,margin , 1 
!Door   
*SET,doorW , 1  
*SET,doorH , 2  
!Window 
*SET,windW , 1.25   
*SET,windH , 1.25   
*SET,windMargin , 0.125 
!Helping Variables  
*SET,ww , windW + 2 * windMargin
*SET,wh , windH + 2 * windMargin
!For House  
*SET,rw , width - 2 * margin
*SET,rh , height - margin   
*SET,meshsize , 0.1 
*SET,doorStep , 1   
*SET,windowStep , 0.5   
*SET,n , 0  
*SET,maxDStep , 5    !(rw - doorW)/doorStep 
*SET,maxWindowStepWidth , (rw - ww)//windowStep 
*SET,maxWindowStepHeight , (rh - door - wh)//windowStep 
*SET,maxWStep , maxWindowStepWidth * maxWindowStepHeight !+ maxWindowStepWidth//2   
maxWStep=5  
*SET,nextPos , ww//windowStep + 1   
! Creating Matrix   
*SET,size , 92 !steps * (maxWStep+1)*maxWStep /2
*SET,nParam , 10
*dim, c,, size,nParam, 1
! -------------------------------------------   
!  Loop over door-window-window positions   
!--------------------------------------------   
*do,door,1,maxDStep,doorStep
*do, w1, 0, maxWStep,1  
*do, w2, w1+nextPos,maxWStep,1  
*SET,n , n + 1  
!-----------------  
!Initialize Iter
!-----------------  
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:57:51
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
!-------------------
!New window position
!-------------------
*SET,colW1 , MOD(w1,4)  
*SET,rowW1 , (w1 - colW1)/4 
*SET,colW2 , MOD(w2,4)  
*SET,rowW2 , (w2 - colW2)/4 
!Case where window and door are at one line 
*IF, door,LE,3,THEN 
*IF, w1, GE, 12, THEN   
*SET,colW1 , colW1 + 2  
*ENDIF  
*ENDIF  
*IF, door,LE,3,THEN 
*IF, w2, GE, 12, THEN   
*SET,colW2 , colW2 + 2  
*ENDIF  
*SET,wind1X , margin + colW1*(2* windMargin + windW) + windMargin   
*SET,wind1Y , height - margin - (rowW1+1)*(2*windMargin + windW) + windMargin   
*SET,wind2X , margin + colW2*(2* windMargin + windW) + windMargin   
*SET,wind2Y , height - margin - (rowW2+1)*(2*windMargin + windW) + windMargin   
!-------------------------------------  
!-- Guarantee that its not at (4,4) --  
!-------------------------------------  
! *IF wind1X or wind2X is between 4-windW and 4 
! or wind1Y or wind2Y is between 4-windH and 4  
! continue  
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , door  
*SET,c(n,2) , wind1X
*SET,c(n,3) , wind1Y
*SET,c(n,4) , wind2X
*SET,c(n,5) , wind2Y
!-----------------  
!Create House   
!-----------------  
BLC4,xStart, yStart, width, height !House   
BLC4,door,yStart, doorW, doorH !Door
BLC4,wind1X,wind1Y,windW,windH !Window  
BLC4,wind2X,wind2Y,windW,windH !2nd Window  
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2   
dl,17,,all  
dl,18,,all  
sfl,3,pres,25000000 
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
FINISH  
/SOL
solve   
FINISH  
/POST1  
!-----------------  
! Value at point 4,4
!-----------------  
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!  
! T O   D O !!!!!!!!!!!!!!!!!!!!!!  
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!  
!Checken ob wir wirklich die Lösung bekommen die wir wollen
! maximale Verschiebung bei 4,4 
allsel  
nsel,s,loc,x,4 !select nodes with x coordinate  
nsel,r,loc,y,4 !reselect with y coordinate  
*get,UY44,NODE,NDNEXT(0),U,Y
*get,UX44,NODE,NDNEXT(0),U,X
*get,SX44,NODE,NDNEXT(0),S,X
*get,SY44,NODE,NDNEXT(0),S,Y
*get,SXY44,NODE,NDNEXT(0),S,XY  
*SET,c(n,6) , UX44  
*SET,c(n,7) , UY44  
*SET,c(n,8) , SX44  
*SET,c(n,9) , SY44  
*SET,c(n,10) , SXY44
*enddo  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:58:08
*enddo  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:58:49
*enddo  
/BATCH  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       20:59:21
/input,menust,tmp,''
/GRA,POWER
/GST,ON
/PLO,INFO,3
/GRO,CURL,ON
/CPLANE,1   
/REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
/REPLOT,RESIZE  
