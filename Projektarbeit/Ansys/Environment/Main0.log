/BATCH  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:28:39
/input,menust,tmp,''
/GRA,POWER
/GST,ON
/PLO,INFO,3
/GRO,CURL,ON
/CPLANE,1   
/REPLOT,RESIZE  
WPSTYLE,,,,,,,,0
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:36:22
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,margin , 0.5   
!Critical Point 
*SET,xC , 4 
*SET,yC , 4 
!Door   
*SET,doorW , 1  
*SET,doorH , 2  
!Window 
*SET,windW , 1.5
*SET,windH , 1.5
*SET,windMargin , 0.25  
!Helping Variables  
*SET,ww , windW + windMargin + windMargin   
*SET,wh , windH + windMargin + windMargin   
!For House  
*SET,rw , width - margin - margin   
*SET,rh , height - margin   
*SET,n , 0  
*SET,meshsize , 0.05
*SET,size , 7   
! Creating Matrix   
*SET,size , tries !steps * (maxWStep+1)*maxWStep /2 
*SET,nParam , 10
*dim, c,, size,nParam, 1
!############################################   
!## Loop over random positions ##   
!############################################   
*dowhile,size-n 
!#### S T O R A G E 
!#### I N I T   I T E R 
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:36:23
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
!#### R A N D O M   
*SET,doorX ,  rand(margin,margin + rw-doorW) !+margin   
*SET,windX1 , rand(margin,margin + rw-ww)    !+margin   
*SET,windY1 , rand(0, rh-wh)
*SET,windX2 , rand(margin,margin + rw-ww)   
*SET,windY2 , rand(0,rh-wh) 
!#### V A L I D A T E   
!--------------------------------------------------------   
!window in door 2x  
*IF,windX1+ww,gt,doorX,and,windX1,lt,doorX+doorW+windMargin,cycle   
*IF,windX2+ww,gt,doorX,and,windX2,lt,doorX+doorW+windMargin,cycle   
!--------------------------------------------------------   
!crit in window 2x  
!--------------------------------------------------------   
*SET,bool , 0   
*IF,windX1,le,xC,and,xC, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,yC,and,yC,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!!!! 
*SET,bool , 0   
*IF,windX2,le,xC,and,xC, le, windX2 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY2,le,yC,and,yC,le,windY2 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
!window in window   
!--------------------------------------------------------   
*SET,bool , 0   
*SET,boolF , 0  
!!!! Corner x2,y2   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2+w, y2
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2+ww, le, windX1 + ww,THEN 
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2 + w, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2 + ww, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
*SET,n , n + 1  
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , doorX 
*SET,c(n,2) , windX1
*SET,c(n,3) , windY1
*SET,c(n,4) , windX2
*SET,c(n,5) , windY2
!-----------------  
!Create House   
!-----------------  
!House  
BLC4,xStart, yStart, width, height  
!Door   
BLC4,doorX,yStart, doorW, doorH 
!Window 
BLC4,windX1+windMargin,windY1+windMargin,windW,windH
!2nd Window 
BLC4,windX2+windMargin,windY2+windMargin,windW,windH
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2 !Standardwerte Querdehnzahl [0  0.3]  
dl,17,,all  
dl,18,,all  
sfl,3,pres,25000000 
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
FINISH  
/SOL
solve   
FINISH  
/POST1  
!-----------------  
! Value at point critical point 
!-----------------  
!Checken ob wir wirklich die Lösung bekommen die wir wollen
! maximale Verschiebung bei xC,yC   
allsel  
!seltol, meshsize   
nsel,s,loc,x,xC-meshsize, xC + meshsize !select nodes with x coordinate 
nsel,r,loc,y,yC-meshsize, yC + meshsize !reselect with y coordinate 
*get,UY44,NODE,NDNEXT(0),U,Y !NDNEXT is ugly
*get,UX44,NODE,NDNEXT(0),U,X
*get,SX44,NODE,NDNEXT(0),S,X
*get,SY44,NODE,NDNEXT(0),S,Y
*get,SXY44,NODE,NDNEXT(0),S,XY  
*SET,c(n,6) , UX44  
*SET,c(n,7) , UY44  
*SET,c(n,8) , SX44  
*SET,c(n,9) , SY44  
*SET,c(n,10) , SXY44
!######  P I C T U R E S
!/SHOW,WIN32C   
!SET,FIRST  
!/PLOPTS,INFO,3 
!/CONTOUR,ALL,18
!/PNUM,MAT,1
!/NUMBER,1  
!/REPLOT,RESIZE 
!PLNSOL,U,X 
!/UI,COPY,SAVE,PNG,GRAPH,COLOR,NORM,LANDSCAPE,YES   
!/SHOW,WIN32
!/REPLOT,RESIZE 
*IF,MOD(n,100),0,THEN,  
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
*ENDIF  
*enddo  
!!! Writes out Matrix to matlab 
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:37:32
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,margin , 0.5   
!Critical Point 
*SET,xC , 4 
*SET,yC , 4 
!Door   
*SET,doorW , 1  
*SET,doorH , 2  
!Window 
*SET,windW , 1.5
*SET,windH , 1.5
*SET,windMargin , 0.25  
!Helping Variables  
*SET,ww , windW + windMargin + windMargin   
*SET,wh , windH + windMargin + windMargin   
!For House  
*SET,rw , width - margin - margin   
*SET,rh , height - margin   
*SET,n , 0  
*SET,meshsize , 0.05
*SET,size , 7   
! Creating Matrix   
*SET,size , tries !steps * (maxWStep+1)*maxWStep /2 
*SET,nParam , 10
*dim, c,, size,nParam, 1
!############################################   
!## Loop over random positions ##   
!############################################   
*dowhile,size-n 
!#### S T O R A G E 
!#### I N I T   I T E R 
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:37:34
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
!#### R A N D O M   
*SET,doorX ,  rand(margin,margin + rw-doorW) !+margin   
*SET,windX1 , rand(margin,margin + rw-ww)    !+margin   
*SET,windY1 , rand(0, rh-wh)
*SET,windX2 , rand(margin,margin + rw-ww)   
*SET,windY2 , rand(0,rh-wh) 
!#### V A L I D A T E   
!--------------------------------------------------------   
!window in door 2x  
*IF,windX1+ww,gt,doorX,and,windX1,lt,doorX+doorW+windMargin,cycle   
*IF,windX2+ww,gt,doorX,and,windX2,lt,doorX+doorW+windMargin,cycle   
!--------------------------------------------------------   
!crit in window 2x  
!--------------------------------------------------------   
*SET,bool , 0   
*IF,windX1,le,xC,and,xC, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,yC,and,yC,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!!!! 
*SET,bool , 0   
*IF,windX2,le,xC,and,xC, le, windX2 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY2,le,yC,and,yC,le,windY2 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
!window in window   
!--------------------------------------------------------   
*SET,bool , 0   
*SET,boolF , 0  
!!!! Corner x2,y2   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2+w, y2
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2+ww, le, windX1 + ww,THEN 
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2 + w, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2 + ww, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
*SET,n , n + 1  
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , doorX 
*SET,c(n,2) , windX1
*SET,c(n,3) , windY1
*SET,c(n,4) , windX2
*SET,c(n,5) , windY2
!-----------------  
!Create House   
!-----------------  
!House  
BLC4,xStart, yStart, width, height  
!Door   
BLC4,doorX,yStart, doorW, doorH 
!Window 
BLC4,windX1+windMargin,windY1+windMargin,windW,windH
!2nd Window 
BLC4,windX2+windMargin,windY2+windMargin,windW,windH
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2 !Standardwerte Querdehnzahl [0  0.3]  
dl,17,,all  
dl,18,,all  
sfl,3,pres,250000 !2.5 e5   
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
FINISH  
/SOL
solve   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
FINISH  
/POST1  
!-----------------  
! Value at point critical point 
!-----------------  
!Checken ob wir wirklich die Lösung bekommen die wir wollen
! maximale Verschiebung bei xC,yC   
allsel  
!seltol, meshsize   
nsel,s,loc,x,xC-meshsize, xC + meshsize !select nodes with x coordinate 
nsel,r,loc,y,yC-meshsize, yC + meshsize !reselect with y coordinate 
*get,UY44,NODE,NDNEXT(0),U,Y !NDNEXT is ugly
*get,UX44,NODE,NDNEXT(0),U,X
*get,SX44,NODE,NDNEXT(0),S,X
*get,SY44,NODE,NDNEXT(0),S,Y
*get,SXY44,NODE,NDNEXT(0),S,XY  
*SET,c(n,6) , UX44  
*SET,c(n,7) , UY44  
*SET,c(n,8) , SX44  
*SET,c(n,9) , SY44  
*SET,c(n,10) , SXY44
!######  P I C T U R E S
!/SHOW,WIN32C   
!SET,FIRST  
!/PLOPTS,INFO,3 
!/CONTOUR,ALL,18
!/PNUM,MAT,1
!/NUMBER,1  
!/REPLOT,RESIZE 
!PLNSOL,U,X 
!/UI,COPY,SAVE,PNG,GRAPH,COLOR,NORM,LANDSCAPE,YES   
!/SHOW,WIN32
!/REPLOT,RESIZE 
*IF,MOD(n,100),0,THEN,  
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
*ENDIF  
*enddo  
!!! Writes out Matrix to matlab 
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
*SET,k , mod(3,4)   
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:43:14
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,margin , 0.5   
!Critical Point 
*SET,xC , 4 
*SET,yC , 4 
!Door   
*SET,doorW , 1  
*SET,doorH , 2  
!Window 
*SET,windW , 1.5
*SET,windH , 1.5
*SET,windMargin , 0.25  
!Helping Variables  
*SET,ww , windW + windMargin + windMargin   
*SET,wh , windH + windMargin + windMargin   
!For House  
*SET,rw , width - margin - margin   
*SET,rh , height - margin   
*SET,n , 0  
*SET,meshsize , 0.05
*SET,size , 7   
! Creating Matrix   
*SET,size , tries !steps * (maxWStep+1)*maxWStep /2 
*SET,nParam , 10
*dim, c,, size,nParam, 1
!############################################   
!## Loop over random positions ##   
!############################################   
*dowhile,size-n 
!#### S T O R A G E 
!#### I N I T   I T E R 
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:43:16
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
!#### R A N D O M   
*SET,doorX ,  rand(margin,margin + rw-doorW) !+margin   
*SET,windX1 , rand(margin,margin + rw-ww)    !+margin   
*SET,windY1 , rand(0, rh-wh)
*SET,windX2 , rand(margin,margin + rw-ww)   
*SET,windY2 , rand(0,rh-wh) 
!#### V A L I D A T E   
!--------------------------------------------------------   
!window in door 2x  
*IF,windX1+ww,gt,doorX,and,windX1,lt,doorX+doorW+windMargin,cycle   
*IF,windX2+ww,gt,doorX,and,windX2,lt,doorX+doorW+windMargin,cycle   
!--------------------------------------------------------   
!crit in window 2x  
!--------------------------------------------------------   
*SET,bool , 0   
*IF,windX1,le,xC,and,xC, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,yC,and,yC,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!!!! 
*SET,bool , 0   
*IF,windX2,le,xC,and,xC, le, windX2 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY2,le,yC,and,yC,le,windY2 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
!window in window   
!--------------------------------------------------------   
*SET,bool , 0   
*SET,boolF , 0  
!!!! Corner x2,y2   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2+w, y2
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2+ww, le, windX1 + ww,THEN 
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2 + w, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2 + ww, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
*SET,n , n + 1  
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , doorX 
*SET,c(n,2) , windX1
*SET,c(n,3) , windY1
*SET,c(n,4) , windX2
*SET,c(n,5) , windY2
!-----------------  
!Create House   
!-----------------  
!House  
BLC4,xStart, yStart, width, height  
!Door   
BLC4,doorX,yStart, doorW, doorH 
!Window 
BLC4,windX1+windMargin,windY1+windMargin,windW,windH
!2nd Window 
BLC4,windX2+windMargin,windY2+windMargin,windW,windH
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2 !Standardwerte Querdehnzahl [0  0.3]  
dl,17,,all  
dl,18,,all  
sfl,3,pres,250000 !2.5 e5   
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
FINISH  
/SOL
solve   
FINISH  
/POST1  
!-----------------  
! Value at point critical point 
!-----------------  
!Checken ob wir wirklich die Lösung bekommen die wir wollen
! maximale Verschiebung bei xC,yC   
allsel  
!seltol, meshsize   
nsel,s,loc,x,xC-meshsize, xC + meshsize !select nodes with x coordinate 
nsel,r,loc,y,yC-meshsize, yC + meshsize !reselect with y coordinate 
*get,UY44,NODE,NDNEXT(0),U,Y !NDNEXT is ugly
*get,UX44,NODE,NDNEXT(0),U,X
*get,SX44,NODE,NDNEXT(0),S,X
*get,SY44,NODE,NDNEXT(0),S,Y
*get,SXY44,NODE,NDNEXT(0),S,XY  
*SET,c(n,6) , UX44  
*SET,c(n,7) , UY44  
*SET,c(n,8) , SX44  
*SET,c(n,9) , SY44  
*SET,c(n,10) , SXY44
!######  P I C T U R E S
!/SHOW,WIN32C   
!SET,FIRST  
!/PLOPTS,INFO,3 
!/CONTOUR,ALL,18
!/PNUM,MAT,1
!/NUMBER,1  
!/REPLOT,RESIZE 
!PLNSOL,U,X 
!/UI,COPY,SAVE,PNG,GRAPH,COLOR,NORM,LANDSCAPE,YES   
!/SHOW,WIN32
!/REPLOT,RESIZE 
*IF,MOD(n,100),eq,0,THEN,   
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
*ENDIF  
*enddo  
!!! Writes out Matrix to matlab 
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
/DIST, 1 ,1.082226,1
/REP,FAST   
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:45:53
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,margin , 0.5   
!Critical Point 
*SET,xC , 4 
*SET,yC , 4 
!Door   
*SET,doorW , 1  
*SET,doorH , 2  
!Window 
*SET,windW , 1.5
*SET,windH , 1.5
*SET,windMargin , 0.25  
!Helping Variables  
*SET,ww , windW + windMargin + windMargin   
*SET,wh , windH + windMargin + windMargin   
!For House  
*SET,rw , width - margin - margin   
*SET,rh , height - margin   
*SET,n , 0  
*SET,meshsize , 0.05
*SET,tries , 12 
! Creating Matrix   
*SET,size , tries !steps * (maxWStep+1)*maxWStep /2 
*SET,nParam , 10
*dim, c,, size,nParam, 1
!############################################   
!## Loop over random positions ##   
!############################################   
*do,data,1,tries,1  
!#### S T O R A G E 
!#### I N I T   I T E R 
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:45:55
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
!#### R A N D O M   
*SET,doorX ,  rand(margin,margin + rw-doorW) !+margin   
*SET,windX1 , rand(margin,margin + rw-ww)    !+margin   
*SET,windY1 , rand(0, rh-wh)
*SET,windX2 , rand(margin,margin + rw-ww)   
*SET,windY2 , rand(0,rh-wh) 
!#### V A L I D A T E   
!--------------------------------------------------------   
!window in door 2x  
*IF,windX1+ww,gt,doorX,and,windX1,lt,doorX+doorW+windMargin,cycle   
*IF,windX2+ww,gt,doorX,and,windX2,lt,doorX+doorW+windMargin,cycle   
!--------------------------------------------------------   
!crit in window 2x  
!--------------------------------------------------------   
*SET,bool , 0   
*IF,windX1,le,xC,and,xC, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,yC,and,yC,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!!!! 
*SET,bool , 0   
*IF,windX2,le,xC,and,xC, le, windX2 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY2,le,yC,and,yC,le,windY2 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
!window in window   
!--------------------------------------------------------   
*SET,bool , 0   
*SET,boolF , 0  
!!!! Corner x2,y2   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2+w, y2
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2+ww, le, windX1 + ww,THEN 
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2 + w, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2 + ww, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
*SET,n , n + 1  
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , doorX 
*SET,c(n,2) , windX1
*SET,c(n,3) , windY1
*SET,c(n,4) , windX2
*SET,c(n,5) , windY2
!-----------------  
!Create House   
!-----------------  
!House  
BLC4,xStart, yStart, width, height  
!Door   
BLC4,doorX,yStart, doorW, doorH 
!Window 
BLC4,windX1+windMargin,windY1+windMargin,windW,windH
!2nd Window 
BLC4,windX2+windMargin,windY2+windMargin,windW,windH
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2 !Standardwerte Querdehnzahl [0  0.3]  
dl,17,,all  
dl,18,,all  
sfl,3,pres,25000000 
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
FINISH  
/SOL
solve   
FINISH  
/POST1  
!-----------------  
! Value at point critical point 
!-----------------  
!Checken ob wir wirklich die Lösung bekommen die wir wollen
! maximale Verschiebung bei xC,yC   
allsel  
!seltol, meshsize   
nsel,s,loc,x,xC-meshsize, xC + meshsize !select nodes with x coordinate 
nsel,r,loc,y,yC-meshsize, yC + meshsize !reselect with y coordinate 
*get,UY44,NODE,NDNEXT(0),U,Y !NDNEXT is ugly
*get,UX44,NODE,NDNEXT(0),U,X
*get,SX44,NODE,NDNEXT(0),S,X
*get,SY44,NODE,NDNEXT(0),S,Y
*get,SXY44,NODE,NDNEXT(0),S,XY  
*SET,c(n,6) , UX44  
*SET,c(n,7) , UY44  
*SET,c(n,8) , SX44  
*SET,c(n,9) , SY44  
*SET,c(n,10) , SXY44
!######  P I C T U R E S
/SHOW,WIN32C
SET,FIRST   
/PLOPTS,INFO,3  
/CONTOUR,ALL,18 
/PNUM,MAT,1 
/NUMBER,1   
/REPLOT,RESIZE  
PLNSOL,U,X  
/UI,COPY,SAVE,PNG,GRAPH,COLOR,NORM,LANDSCAPE,YES
/SHOW,WIN32 
/REPLOT,RESIZE  
*enddo  
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:46:43
!!! Writes out Matrix to matlab 
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file 
*export, exportmatrix, mmf, mytemp.mtx  
/DIST, 1 ,0.924021,1
/REP,FAST   
/DIST, 1 ,0.924021,1
/REP,FAST   
!################################################   
!### Projektarbeit Jonathan Schnitzler     ######   
!### Datengenerierung für Neuronales Netz  ######  
!################################################   
!################################################   
!##            Start des Programms             ##   
!################################################   
/nerr,0 
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:50:40
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
!-----------------  
!Parameter  
!-----------------  
*SET,xStart , 0 
*SET,yStart , 0 
*SET,height , 8 
*SET,width , 8  
*SET,margin , 0.5   
!Critical Point 
*SET,xC , 4 
*SET,yC , 4 
!Door   
*SET,doorW , 1  
*SET,doorH , 2  
!Window 
*SET,windW , 1.5
*SET,windH , 1.5
*SET,windMargin , 0.25  
!Helping Variables  
*SET,ww , windW + windMargin + windMargin   
*SET,wh , windH + windMargin + windMargin   
!For House  
*SET,rw , width - margin - margin   
*SET,rh , height - margin   
*SET,n , 0  
*SET,meshsize , 0.05
*SET,tries , 1000   
! Creating Matrix   
*SET,size , tries !steps * (maxWStep+1)*maxWStep /2 
*SET,nParam , 10
*dim, c,, size,nParam, 1
!############################################   
!## Loop over random positions ##   
!############################################   
*do,data,1,tries,1  
!#### S T O R A G E 
!#### I N I T   I T E R 
parsav,all  
finish  
/clear,start
/COM,ANSYS RELEASE 2020 R1           BUILD 20.1      UP20191203       08:50:43
/input,start,ans,'C:\Program Files\ANSYS Inc\v201\ANSYS\apdl\'  
parres  
!#### R A N D O M   
*SET,doorX ,  rand(margin,margin + rw-doorW) !+margin   
*SET,windX1 , rand(margin,margin + rw-ww)    !+margin   
*SET,windY1 , rand(0, rh-wh)
*SET,windX2 , rand(margin,margin + rw-ww)   
*SET,windY2 , rand(0,rh-wh) 
!#### V A L I D A T E   
!--------------------------------------------------------   
!window in door 2x  
*IF,windX1+ww,gt,doorX,and,windX1,lt,doorX+doorW+windMargin,cycle   
*IF,windX2+ww,gt,doorX,and,windX2,lt,doorX+doorW+windMargin,cycle   
!--------------------------------------------------------   
!crit in window 2x  
!--------------------------------------------------------   
*SET,bool , 0   
*IF,windX1,le,xC,and,xC, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,yC,and,yC,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!!!! 
*SET,bool , 0   
*IF,windX2,le,xC,and,xC, le, windX2 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY2,le,yC,and,yC,le,windY2 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
!window in window   
!--------------------------------------------------------   
*SET,bool , 0   
*SET,boolF , 0  
!!!! Corner x2,y2   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2+w, y2
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2+ww, le, windX1 + ww,THEN 
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2,and,windY2,le,windY1 + wh,THEN
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2,and,windX2, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!!!!
!!!! Corner x2 + w, y2 + h  
*SET,bool , 0   
*IF,windX1,le,windX2+ww,and,windX2 + ww, le, windX1 + ww,THEN   
*SET,bool , bool + 1
*ENDIF  
*IF, windY1,le,windY2+wh,and,windY2+wh,le,windY1 + wh,THEN  
*SET,bool , bool + 1
*ENDIF  
*IF,bool,ge,2,cycle 
!--------------------------------------------------------   
*SET,n , n + 1  
/prep7  
!-----------------  
! Saving initial Param  
!-----------------  
*SET,c(n,1) , doorX 
*SET,c(n,2) , windX1
*SET,c(n,3) , windY1
*SET,c(n,4) , windX2
*SET,c(n,5) , windY2
!-----------------  
!Create House   
!-----------------  
!House  
BLC4,xStart, yStart, width, height  
!Door   
BLC4,doorX,yStart, doorW, doorH 
!Window 
BLC4,windX1+windMargin,windY1+windMargin,windW,windH
!2nd Window 
BLC4,windX2+windMargin,windY2+windMargin,windW,windH
!Selecting and deleting the area of Door and the two windows
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X  
!-----------------  
! Material  
!-----------------  
ET,1,PLANE182   
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0
r,1,0.2 
mp,ex,1,30000000
mp,prxy,1,0.2 !Standardwerte Querdehnzahl [0  0.3]  
dl,17,,all  
dl,18,,all  
sfl,3,pres,25000000 
!-----------------  
! Mesh  
!-----------------  
esize,meshsize  
amesh,all   
cpintf,all  
!/OUTPUT,data,txt,APPEND
/solu   
solve   
/post1  
!-----------------  
! Value at point critical point 
!-----------------  
!Checken ob wir wirklich die Lösung bekommen die wir wollen
! maximale Verschiebung bei xC,yC   
allsel  
!seltol, meshsize   
nsel,s,loc,x,xC-meshsize, xC + meshsize !select nodes with x coordinate 
nsel,r,loc,y,yC-meshsize, yC + meshsize !reselect with y coordinate 
*get,UY44,NODE,NDNEXT(0),U,Y !NDNEXT is ugly
*get,UX44,NODE,NDNEXT(0),U,X
*get,SX44,NODE,NDNEXT(0),S,X
*get,SY44,NODE,NDNEXT(0),S,Y
*get,SXY44,NODE,NDNEXT(0),S,XY  
*SET,c(n,6) , UX44  
*SET,c(n,7) , UY44  
*SET,c(n,8) , SX44  
*SET,c(n,9) , SY44  
*SET,c(n,10) , SXY44
!######  P I C T U R E S
/SHOW,WIN32C
SET,FIRST   
/PLOPTS,INFO,3  
/CONTOUR,ALL,18 
/PNUM,MAT,1 
/NUMBER,1   
/REPLOT,RESIZE  
PLNSOL,U,X  
/UI,COPY,SAVE,PNG,GRAPH,COLOR,NORM,LANDSCAPE,YES
/SHOW,WIN32 
/REPLOT,RESIZE  
*enddo  
