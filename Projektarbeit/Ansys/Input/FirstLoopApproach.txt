!========================================================
! Wandscheibe mit ï¿½ffnungen
! Einheiten: [kN],[m]
!========================================================


/nerr,0

*do,j,1,10,1
/com,
*enddo
/COM *** 5.2.2 ANSYS APDL ***

finish
/clear,start

meshsize = 0.5
verfein = 1
steps = 30
*ask,startVal,Anfangswert,0

*DIM,results,TABLE,steps,6
*TAXIS,results(1,1),1,1.,2.,3.,4.,5.,6.,7.,8.,9.,10.,
*TAXIS,results(1,1),2,1.,2.,3.,4.,5.,6.

*dim, c,, steps,10, 1 ! Example Matrix
enow = 0
*do, ct, 1, 10        
    *do, ct2, 1, 10
        c(ct,ct2) = 0
    *enddo    
*enddo    





! *** loop to restart the calculation ***
!------------------------------------------------
*do,j,1,steps,1


/com,  %j%  %meshsize%
results(j,1) = meshsize



parsav,all
finish
/clear,start
parres



/prep7


!-----------------
!Create House
!-----------------
BLC4,0,0,8,8 !House
BLC4,1,0,1,2 !Door
BLC4,5,5,1.5,1.5 !Window
BLC4,2.5,5,1.5,1.5 !2nd Window
FLST,3,3,5,ORDE,2   
FITEM,3,2   
FITEM,3,-4  
ASBA,       1,P51X

!blc4,0,0,10,10
!blc4,5,0,5,5
!asba,1,2

!-----------------
! Material
!-----------------
ET,1,PLANE182
KEYOPT,1,1,0
KEYOPT,1,3,3
KEYOPT,1,6,0

r,1,0.2

mp,ex,1,30000000
mp,prxy,1,0.2

dl,9,,all
sfl,3,pres,250

!----------------
! Mesh
!
esize,meshsize
amesh,all
cpintf,all

/solu
solve

/post1


! maximale Verschiebung bei 4,4
allsel
nsel,s,loc,x,4 !select 
nsel,r,loc,y,4 !reselect
*get,u,NODE,NDNEXT(0),u,y
results(j,3) = u
c(j,3) = u




*enddo


!!! Writes out Matrix to matlab
*dmat, exportmatrix, D, import, APDL, c ! export to matrix file
*export, exportmatrix, mmf, mytemp.mtx



! *** exit the programm ***
!------------------------------------------------
finish
!/exit